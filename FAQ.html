<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Frequently Asked Questions (FAQ) for Sedna</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">
.question {
 font-weight: bold;
 color: #D95032;
}

pre {
padding-left: 20px;
}
</style>
</head>

<body>

<h1>Frequently Asked Questions (FAQ) for Sedna</h1>

<p>This is a list of frequently asked questions. 
If your question is not answered on this page, please write your question to the Sedna mailing list.
Also feel free to contact us with questions, bug reports, etc: <a href="mailto:modis@ispras.ru">modis@ispras.ru</a></p>

<h2>Contents</h2>

<a href="#general">General Questions</a><br/>
<a href="#windows">Windows Specific Questions</a><br/>
<a href="#linux">Linux Specific Questions</a><br/>
<a href="#bsd">FreeBSD Specific Questions</a><br/>
<a href="#referencies">Referencies</a><br/>


<a name="general"/><h2>General Questions</h2>
<div class="question">
<p>G1. How to drop a database?</p>
</div>

<p>In early versions of Sedna you had to drop a database by manually 
removing database files. Now it is better to use <code>se_ddb</code> command. For 
details see documentation provided with the distribution or just run 
<code>se_dbb -help</code>.</p>     

<div class="question">
<p>G2. I got the following error trying to run <code>se_sm</code>:</p>
<pre>
SE4212 
Database files format is incompatible with SEDNA binaries
Details: See file FAQ shipped with the distribution". 
</pre>
<p>What's wrong?</p>
</div>


<p>Typically this error message means that you have upgraded Sedna to a 
newer version and you are trying to run Sedna on a database created with 
the previous version of Sedna. The solution to the problem is so called 
migration procedure performed by se_exp utility. See Sedna Administration 
Guide ('Migration between Releases' section) for details.</p>     


<div class="question">
<p>G3. I got one of the following errors trying to run se_cdb:</p>
<pre>     
ERROR SE1015
There is no enough memory to initialize buffers.
Details: See file FAQ shipped with the distribution
</pre>
<p>or</p>
<pre>
ERROR SE1016
Cannot lock buffer memory.
Details: See file FAQ shipped with the distribution
</pre>
<p>or</p>
<pre>
ERROR SE4211
Failed to create the database.
Details: test (may be because there is no enough RAM)
</pre>
<p>What's wrong?</p>   
</div>  

<p>Most likely, the reason of the problem is lack of memory. By default Sedna 
requires 100Mb of memory for every running instance of database. You can 
vary the required memory size by <code>-bufs-num</code> option of <code>se_cdb</code>. For details 
see "Managing Databases" section in "Sedna Administration Guide" provided with the distribution or just run 
<code>se_cdb -help</code>.</p>
<p>
If this still does not help then possible reasons/solutions:
</p>
<p>
1. Sedna servers are blocked by firewall (Windows XP SP2 built-in or third party installed).
The solution is to appropriately adjust or turn firewall off.
</p>
<p>
2. Windows XP SP2 limits half-open connections to a maximum of 10. 
Some applications, like, for example, filesharing tools, can't unfold their capacity 
when the maximum connection limit is too low.
Look into the event viewer (start->run 'Eventvwr.msc'->system). 
If you see entries with the event ID 4226 you can try <a href="http://www.xp-antispy.org">xp-AntiSpy</a> 
to raise the connection limit.
</p>

<div class="question">
<p>G4. I've inserted 5 documents into my database, each containing XML data of the same structure.
I want to run an XQuery query against all of those documents.
How can I do that?</p>
</div>

<p>If you have a number of documents that have similar structure (the structure must not be exactly the same) 
and you want to query through the documents, you should store them in a collection. 
Collections are optimized for querying through documents.
<br/><br/>
How to create and use collection see "Managing Collections" section of the "Sedna Programmer's Guide".
</p>


<a name="windows"/><h2>Windows Specific Questions</h2>
<div class="question">
<p>W1.  When I run se_term utility it just hangs on. It seems that I do everything
right because <code>se_gov</code>, <code>se_cdb</code> and <code>se_sm</code> work correctly. 
Is it a bug in se_term?
</p>
</div>
<p>No, it is not. More likely you have NOD32 Antivirus installed. It 
conflicts with Sedna and some other programs. The bug is in NOD32, 
actually. You can solve the problem by configuring NOD32 in the following way.</p>
<p>
Sometimes the following NOD32 configuring helps: go to "IMON module->SETUP->Advanced"; here you can exclude 
<code>se_gov</code> process.
</p>     
<p>If this does not help turn off NOD32 Internet Monitoring module IMON and then restart Windows: "NOD32 Control Center > IMON > Quit" + System Restart.
</p>

<div class="question">
<p>W2. I am on a Windows XP. <code>se_gov</code> runs fine, and it says that the <code>GOVERNER is
running</code>. Start database with <code>se_sm</code> also works.
The problem being, I cannot open a session with <code>se_term</code> utility. I get the following error:</p>
<pre>     
Failed to open session
SEDNA Message: ERROR SE3007
Failed to receive a message.
Details: Connection was broken while receive se_SendSessionParameters
message from server
</pre>     
</div>
<p>It looks like Winsock2 on you Windows XP has been corrupted. 
Please read this Microsoft support page and try to determine whether the
Winsock2 key is corrupted, and if yes - recover from Winsock2 corruption:
<br/>
<a href="http://support.microsoft.com/kb/811259/en">http://support.microsoft.com/kb/811259/en</a>
</p>

<a name="linux"/><h2>Linux Specific Questions</h2>

<div class="question">
<p>L1.  I got the following error trying to run <code>se_gov</code>:</p>
<pre>
ERROR SE1000
Environment error. This error is caused by environment (operating system).
Details: Failed to bind socket
</pre>     
<p>Is it a bug?</p>
</div>

<p>Actually, not. Wait for several minutes and try again. 
The problem is in sockets. The following is what socket FAQ says:</p>

<p>When you issue the <code>close()</code> system call, you are closing your interface to 
the socket, not the socket itself. It is up to the kernel to close the 
socket. Sometimes, for really technical reasons, the socket is kept alive 
for a few minutes after you close it. It is normal, for example for the 
socket to go into a <code>TIME_WAIT</code> state, on the server side, for a few minutes. 
People have reported ranges from 20 seconds to 4 minutes to me. The 
official standard says that it should be 4 minutes. On my Linux system it 
is about 2 minutes.</p>

<div class="question">
<p>L2.  I have downloaded a binary version and tried to use SQL Connection.
I got the following error:</p>
<pre>     
SE2113
SQL Connection support disabled
</pre>
</div>     

<p>A binary Linux version does not have support for SQL Connection. This is 
due to the problems of linking Sedna executables with static odbc library.
But you can download Sedna sources and compile Sedna yourself
with <code>SQL_CONNECTION</code> variable set to 1. See <code>INSTALL</code> file provided with
Sedna sources for additional information.</p>

<div class="question">
<p>L3.  I got the following error trying to run se_gov:</p>
<pre>
SE4074
Can't create memory mapping
Details: See file FAQ shipped with the distribution
</pre>
<p>Am I able to run Sedna on my computer?</p>
</div>     

<p>Hopefully, you are. The desribed situation happens when your Linux 
installation does not turn on support for shm fs. Without it, it is not
POSIX compatible. The problem is known to happen on ALT Linux, some 
Debian installations (possibly with kernel 2.4). The problem can be 
fixed by mounting <code>/dev/shm</code>.</p>

<ol>
<li><p>One way is to issue the following command (valid until system 
restarts). Note that you need root privileges.</p>
<pre>mount -t tmpfs tmpfs /dev/shm</pre>
<p>If you have no /dev/shm, just create it:</p>
<pre>mkdir /dev/shm</pre></li>

<li><p>Another way is to edit configuration files (also valid after system
restart). Note that you need root privileges.</p>
<ol type="a">
       <li> Add the following line to <code>/etc/fstab</code> (if it isn't there already):

          <pre>tmpfs /dev/shm tmpfs defaults 0 0</pre> </li>

       <li>Mount shared memory as follows:

          <pre>mount /dev/shm</pre></li>

       <li>Issue the following command to check that it mounted properly:

          <pre>mount | grep "shm"</pre>

          If the mount was successful, then the following output (or similar) 
          should appear: 

          <pre>tmpfs on /dev/shm type tmpfs (rw)</pre>

          If the output from this command is blank, then the mount failed.
          If <code>/dev/shm</code> fails to mount, then this feature may not be turned 
          on in your Linux kernel. In this case we recommend upgrading to 
          a more recent Linux kernel, or contacting your Linux Distribution 
          vendor for more information on enabling POSIX Shared Memory.</li>
</ol>
</li>
</ol>          

<div class="question">
<p>L4. I Can't create more than one database on Linux.</p>
</div>     

<p>One of the possible reason of this behaviour is the /dev/shm temporary filesystem size (use df -h to check it size). Try to extend it using the following command:
<br/>
<code>mount -o remount,size=&lt;size&gt; /dev/shm (substitute &lt;size&gt; with exact value)</code>
</p>

<a name="bsd"/><h2>FreeBSD Specific Questions</h2>

<div class="question">
<p>BSD1. What I need to run Sedna under FreeBSD?</p>
</div>     

<p>To run Sedna under FreeBSD you need to perform the following additional post-installation steps:</p>

<ol>
<li>   
Unfortunately FreeBSD has a bug in System V semaphores. To run Sedna you have to recompile [1] your kernel with the following patch:
<pre>
<code>   
      -------------------/usr/src/sys/kern/sysv_sem.c -------------------
      *** 1145,1154 ****
      --- 1145,1159 ----
                              error = EIDRM;
                              goto done2;
                      }
            
                      /*
      +                * Renew the semaphore's pointer after wakeup
      +                */
      +               semptr = &amp;semakptr->u.sem_base[sopptr->sem_num];
      +
      +               /*
                       * The semaphore is still alive.  Readjust the count of
                       * waiting processes.
                       */
                      if (sopptr->sem_op == 0)
                              semptr->semzcnt--;
      -------------------------------------------------------------------
</code>
</pre>
</li>   
<li>   
Increase system IPC configuration either using "sysctl" utility [2] or through /boot/loader.conf. Below possible values are listed:
<pre>
      kern.ipc.semmnu=256
      kern.ipc.semmns=512
      kern.ipc.semmni=256
      kern.ipc.semmap=256
</pre>
</li>   
</ol>

<a name="referencies"/><h2>Referencies</h2>

   [1]. building BSD custom kernel: <a href="http://www.freebsd.org/doc/en/books/handbook/kernelconfig-building.html">http://www.freebsd.org/doc/en/books/handbook/kernelconfig-building.html</a><br/>
   [2]. tuning with sysctl: <a href="http://www.freebsd.org/doc/en/books/handbook/configtuning-sysctl.html">http://www.freebsd.org/doc/en/books/handbook/configtuning-sysctl.html</a><br/>

</body>
</html>
