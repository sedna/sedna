
                    Sedna Installation Instructions

   This document describes the installation of Sedna from the source
   code distribution. See file README supplied with this package if 
   you need to install Sedna from binaries.
     _________________________________________________________________

                               Short Version

   In a terminal type (substitute <install-path> with the path to a directory
   for which you have read/write permissions):

        SEDNA_INSTALL=<install-path>
        export SEDNA_INSTALL
        make
        make install
   
   NOTE! On FreeBSD and Solaris you should use GNU make 
         (by default it means "gmake" command instead of "make"). 
         
   NOTE! You may need to perform additionall post installation steps
         depending on your requirements and OS you run Sedna on.
         Please check "Post Installation Setup" section for details.
   
   NOTE! The operating system user that is going to run Sedna must have 
         r-w-x permissions for the following Sedna directories:

            $SEDNA_INSTALL/data
            $SEDNA_INSTALL/cfg

         To grant the necessary permisions to the user under Linux, 
         MacOS, FreeBSD  or Solaris you can use the following command 
         (suppose, <sedna-user> is the user that is going to run Sedna):

            chown <sedna-user> cfg data
     _________________________________________________________________

                                Long Version

   The long version is the rest of this document.

     _________________________________________________________________

                                Requirements

   Sedna is expected to build and run on the following platforms:

   1. Microsoft Windows 2000 and higher
   2. Linux with kernel version 2.4 and higher
   3. Mac OS X (PPC or Intel platform)
   4. FreeBSD (see also Post-Installation Setup::FreeBSD below)
   5. Solaris (x86)

  
   NOTE! Sedna can be build from sources only on 32-bit platforms. However,it's
   possible to build Sedna C driver on a 64bit system. Just run make (gmake 
   on FreeBSD or Solaris) in SEDNA_SOURCES/driver/c folder.

   A modern POSIX-compatible platform should be able to run Sedna potentially, 
   but some effort should be made.

   The following software packages are required for building Sedna 
   from sources:

     * A UNIX console and a set of widely known UNIX tools such as rm, mkdir,
       m4, etc are required. They are usually present in any UNIX
       installation. 

       For the WINDOWS platform you need the Cygwin. Choose m4, make and gcc
       in addition to the default installation. 

     * GNU make is required; other make programs will *not* work. 
       (usually 'gmake' command under Solaris and FreeBSD)

     * You need a C/C++ compiler. For the WINDOWS platform Microsoft C/C++ 
       complier version 12.00.xxxx (Visual C++ 6.0) or higher is required.
        
       For Linux GCC version 3.x.x or higher is required. GCC is also required 
       for the Windows platform for making dependencies (so it is recommended 
       to use Cygwin package with GCC in it).
     
     * For building Java API driver your need Sun Microsystems JDK version 
       1.4 or higher.

   Also check that you have sufficient disk space. You will need about 100
   MB for the source tree during compilation and about 15 MB for the
   installation directory. The default size database requires 
   additionally about 400 Mb.
     _________________________________________________________________

                           Installation Procedure

    0. ENVIRONMENT CONFIGURATION (WINDOWS only):

       Add vsvars32.bat call to the cygwin.bat. vsvars32.bat is intended
       to set environment to use Microsoft tools (cl, linr, etc). It can 
       be found at the Visual Studio installation folder.

       For example the following string can be added to the cygwin.bat
       (which is located at the Cygwin installation folder):

...
call "C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\vsvars32.bat"
...
bash --login -i

       Rename or remove GNU link. Since GNU link has the same file name
       as MS link tool, you need to rename or remove it. GNU link binary 
       can be found at %CYGWIN%/bin/link.exe.

       Run Cygwin. You shoul see something like:

Setting environment for using Microsoft Visual Studio 2005 x86 tools.


    1. CONFIGURATION

       The first step of the installation procedure is to override environment
       variables (if needed):


ACTIVE_CONFIGURATION=Release
export ACTIVE_CONFIGURATION


       Default value: Release
       Turns on the release mode. Otherwise (ACTIVE_CONFIGURATION=Debug) 
       executables will contain debug information.


ENABLE_TRIGGERS=1
export ENABLE_TRIGGERS


       Default value: 1
       Turns on support for triggers. Set ENABLE_TRIGGERS to 0 if you would 
       like to turn support for triggers off.


EL_DEBUG=0
export EL_DEBUG


       Default value: 0
       Throw out all debug printings. Set EL_DEBUG to 1 if you would like
       to get all printings.


JAVA_DRIVER=1
export JAVA_DRIVER


       Default value: 1
       Compiles Java driver. Set JAVA_DRIVER to 0 if you do not want java 
       driver to be compiled.


SQL_CONNECTION=0
export SQL_CONNECTION


       Default value: 0
       Adds support to SQL Connections. Set SQL_CONNECTION to 1 if you 
       want SQL Connection facility to be enabled.

       NOTE! Under UNIX-like operation systems, you may need to install ODBC
       development package (usually unixODBC-devel) to build Sedna with SQL 
       Connection facility enabled.


STATIC_SYS_LIBS=0
export STATIC_SYS_LIBS


       Default value: 0
       Links Sedna executables with shared system libraries. Set 
       STATIC_SYS_LIBS to 1 if you want to link Sedna executables with
       static system libraries.
       
       
ENABLE_LIBEDIT=1
export ENABLE_LIBEDIT

       
       Default value: 1 (ignored on Windows)
       Libedit greatly increases the usability of se_term. It adds 
       all of the standard functionality of the GNU Readline library to the 
       se_term command line, such as being able to easily modify, edit, 
       and retrieve command-history information with the arrow keys. 
       
       NOTE! Under UNIX-like operation systems, you may need to install either 
       libtermcap, libcurses or libncurses package (depending on exact OS type)
       to build Sedna with libedit support. In some cases (e.g. Debian, Ubuntu) 
       you have to install libtermcap, libcurses or libncurses development 
       package as well. 
       
       
SEDNA_INSTALL=<install-path>
export SEDNA_INSTALL


       Identifies the directory where to install Sedna in case of
       "make install" (see below).


    2. BUILD

       To start the build, type

make

       Remember to use GNU make, 'gmake' command under FreeBSD/Solaris. 
       The build may take anywhere from 10 minutes to half an hour 
       depending on your hardware. The last three lines displayed 
       should be:

===================================================================
Make done
===================================================================

    3. INSTALLING THE FILES

make install

       This will install files into the directory identified by 
       $SEDNA_INSTALL that was specified in step 1. Make sure that you have 
       appropriate permissions to write into that area. 

    4. SETTING UP OPERATING SYSTEM

       The operating system user that is going to run Sedna must have 
       r-w-x permissions for the following Sedna directories:

$SEDNA_INSTALL/data
$SEDNA_INSTALL/cfg

       To grant the necessary permisions to the user on Linux/MacOS
       you can use the following command (suppose, <sedna-user> is the user 
       that is going to run Sedna):

chown <sedna-user> cfg data

   Uninstallation: To undo the installation just delete files installed 
   into $SEDNA_INSTALL/sedna.

   Cleaning: After the installation you can make room by removing the
   built files from the source tree with the command "make clean".

     _________________________________________________________________

                          Post-Installation Setup

Environment Variables
=====================

   You may want to add $SEDNA_INSTALL/sedna/bin to the environment variable 
   PATH. Note, that we recommend you to use absolute path. 

Database Files
==============

   Database files will be placed by default into $SEDNA_INSTALL/sedna.
   You may want to set up the place where database files are stored by 
   modifying:
   
        $SEDNA_INSTALL/sedna/etc/sednaconf.xml.sample. 

   See Sedna Administration Guide for details on how to configure Sedna.

FreeBSD
=======

   To run Sedna under FreeBSD you may need to perform the following additional
   post-installation steps:
   
   1. Unfortunately FreeBSD (7.0, 6.3 and earlier) has a bug [3] in System V 
      semaphores. To run Sedna you have to rebuild [1] your kernel with 
      the patch you can get at [3].
   
   2. Increase system IPC configuration either using "sysctl" utility [2] 
      or through /boot/loader.conf. Below possible values are listed:

        kern.ipc.semmnu=256
        kern.ipc.semmns=512
        kern.ipc.semmni=256
        kern.ipc.semmap=258
   
   [1]. building BSD custom kernel:  
        www.freebsd.org/doc/en/books/handbook/kernelconfig-building.html
   [2]. tuning with sysctl:
        www.freebsd.org/doc/en/books/handbook/configtuning-sysctl.html
   [3]. problem report: www.freebsd.org/cgi/query-pr.cgi?pr=123731

Linux
=====

   1. If you run Sedna on Linux with amd64 architecture check that you have
      32bit system libraries installed. For example, ia32-libs package on 
      Ubuntu/Debian.
   
   2. By default Linux kernel doesn't allow to get as much semaphores as Sedna 
      actually needs to run 50 sessions (default maximum) simultaneously.
   
      Extend some of the default kernel parameter settings. It is quite simple. 
      For example, here are instructions on how to modify the kernel.sem and 
      how to keep them set after a reboot:

        * Log on as a user with root authority
        * Open up /etc/sysctl.conf in a text editor and add entries: 

            kernel.sem = "250 64000 32 256"
      
      Last number (SEMMSL) means system wide maximum of semaphore sets, 
      first (SEMMNI) defines maximum number of semaphores per set, second 
      defines total number of semaphores and usually must be equal 
      SEMMSL*SEMMNI. 

      NOTE! se_gov + se_sm processes take apprx. 20 semaphore sets and 
      each se_trn (session) process takes 3 semaphores at least.

        * Enter the sysctl -p command to load in sysctl settings from 
          /etc/sysctl.conf.
        * Enter the ipcs -l to view the updated kernel parameters in sysctl.
     _________________________________________________________________

                              Getting Started

   Sedna is distributed with examples and instructions how to run it.
   See Sedna Quick Start available at "doc" subdirectory of the directory 
   where Sedna is installed.

     _________________________________________________________________

                                 What Now?

   * The Sedna distribution contains a documentation set, which should be
     useful. See documentation at "doc" subdirectory of the directory 
     where Sedna is installed.
   * For support, please, feel free to contact us with questions, 
     suggestions, bug reports and comments:

        modis@ispras.ru

     For up-to-date information and new versions of Sedna visit the Sedna 
     homepage:

        http://www.modis.ispras.ru/sedna

     You can also join the Sedna mail lists at

        https://lists.sourceforge.net/lists/listinfo/sedna-discussion
